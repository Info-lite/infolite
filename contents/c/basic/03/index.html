<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>キーボードからの入力と型変換</title>
  <link rel="stylesheet" href="https://stackedit.io/style.css" />
</head>

<body class="stackedit">
  <div class="stackedit__html"><h2 id="見やすいソースコードの書き方">見やすいソースコードの書き方</h2>
<p>見やすい・分かりやすいソースコードを書く癖をつけましょう。<br>
見やすく・分かりやすいソースコードは、単純なミスを防げるだけでなく、プログラムの流れを直感的に捉えやすくなります。<br>
これは、長いコードになればなるほど重要になってきます。</p>
<p><span class="label label-info">参考資料</span> <a href="../../appendix/coding_tips_c.html">見やすいソースコードの書き方</a></p>
<h2 id="キーボードからの入力">キーボードからの入力</h2>
<h3 id="文字列の入力">文字列の入力</h3>
<p>以下のソースコードを打ち込み、コンパイルして実行してみましょう。</p>
<p><em>Name.c</em><br><br>
<img src="./pic/Name.c.png" alt=""></p>
<p>実行すると、以下のようになります。</p>
<pre><code>名前を入力してください。
</code></pre>
<p>ここで、キーボードから何か入力し、リターンキーを打ちます。<br>
この例では、<code>首都大</code>と入力しました。</p>
<p><em>実行結果</em></p>
<pre><code>名前を入力してください。
首都大
あなたの名前は、首都大ですね。
</code></pre>
<p>入力した文字列を出力することができました。</p>
<h3 id="数値の入力">数値の入力</h3>
<p>次に、数値の入力をしてみましょう。</p>
<p><em>Calc.c</em><br><br>
<img src="./pic/Calc.c.png" alt=""></p>
<p>入力できたら、コンパイルして実行してみましょう。<br>
ここでは、<code>5</code> と <code>7</code> を入力しました。</p>
<p><em>実行結果</em></p>
<pre><code>１つめの値を入力してください。
5
２つめの値を入力してください。
7
5たす7は12
</code></pre>
<p>2つの値を入力すると、それの和が表示されるプログラムです。</p>
<h3 id="プログラムの簡単な解説">プログラムの簡単な解説</h3>
<p>非常に簡単ですが、プログラムのポイントを説明します。</p>
<dl>
<dt>7行目 scanf("%d", &amp;x);</dt>
<dd>キーボードから入力されたものを、整数型（<font color="red">int</font> 型）として取得。`scanf`の場合、変数`x`の前に`&amp;`を付ける事</dd>
</dl>
<h2 id="型変換とキャスト演算子">型変換とキャスト演算子</h2>
<h3 id="型変換">型変換</h3>
<p>次のようなプログラムを考えてみましょう。前のソースコードを少し改良しただけです。</p>
<p><em>Calc2.c</em><br><br>
<img src="./pic/Calc2.c.png" alt=""></p>
<p>このプログラムは、入力した２つの値の商を求めるプログラムです。<br>
いろいろな値を入れて計算してみましょう。</p>
<p>それでは、次の場合を考えてみましょう。</p>
<p><em>実行結果</em></p>
<pre><code>１つめの値を入力してください。
5
２つめの値を入力してください。
2
5わる2は2
</code></pre>
<p>もちろんこの答えは正しいのですが、答えを <code>2.5</code> と返してほしいときはどうすればよいのでしょうか。<br>
それでは、以下のようにプログラムを改良してみましょう。</p>
<p><em>Calc2.c</em><br><br>
<img src="./pic/Calc2.c.Mod1.png" alt=""></p>
<p>変数<code>a</code>, <code>b</code>, <code>ans</code> を <code>double</code> 型で宣言するよう変更しました。この <code>double</code> 型は、小数を含む計算する場合に用いられる変数型です。<br>
よって、先ほどのように <code>5</code> と <code>2</code> を入力すると、<code>2.5</code> という答えが返ってきます。</p>
<p><em>実行結果</em></p>
<pre><code>１つめの値を入力してください。
5
２つめの値を入力してください。
2
5.0わる2.0は2.5
</code></pre>
<p>次に、以下のように改良してみましょう。</p>
<p><em>Calc2.c</em><br><br>
<img src="./pic/Calc2.c.Mod2.png" alt=""></p>
<p>変数 <code>b</code> を <code>int</code> 型にし、他の変数 <code>a</code>, <code>ans</code> は <code>double</code> 型です。<code>int</code> は整数を扱う場合に用いる変数型です。<br>
この場合も、<code>2.5</code> という答えが返ってきます。<br>
これは、１つの数式で、異なる型が使われた場合、<strong>より大きな型</strong>のサイズに合わせて計算するという決まりがあるからです。</p>
<p>基本データ型の大きさ</p>
<pre><code>double &gt; float &gt; long &gt; int &gt; short &gt; byte
</code></pre>
<p>上の表を見れば分かるように、<code>ans</code> の値（つまり、<code>a/b</code> ）は、<code>double/int</code> であるので、<code>double</code> 型に統一されて計算されます。<br>
よって、この場合でも <code>2.5</code> という答えが返ってきます。</p>
<h3 id="キャスト">キャスト</h3>
<p>では、次のように改良してみましょう。</p>
<p><em>Calc2.c</em><br><br>
<img src="./pic/Calc2.c.Mod3.png" alt=""></p>
<p>今度は、変数 <code>ans</code> に代入する式に、 <code>(double)</code> が付け加わっています。<br>
この場合も、<code>5</code> と <code>2</code> を入力すると、<code>2.5</code> が表示されます。</p>
<p><em>実行結果</em></p>
<pre><code>１つめの値を入力してください。
5
２つめの値を入力してください。
2
5わる2は2.5
</code></pre>
<p>この <code>(double)</code> を <strong>キャスト演算子</strong> といい、強制的に型変換を行うことができます。</p>
<p>キャスト演算子</p>
<pre><code>(変数型)
</code></pre>
<p>より大きな型への変換だけではなく、小さな型へも変換ができます。<br>
その場合、保存されているデータの一部が失われ、値が変わってしまうこともあります。</p>
<p>このソースコードの15行目 <code>double ans = (double) a / b</code> から、キャスト演算子を取り除くと（つまり、<code>double ans = a / b</code>）計算結果はどのように変化する、あるいは変化しないでしょうか。またそれはなぜでしょう。</p>
<h2 id="練習問題">練習問題</h2>
<h3 id="問題１">問題１</h3>
<p>上の <code>Calc2.c</code> を改良して、以下のような結果を出力するプログラムを書いてみましょう。</p>
<p><em>実行結果</em></p>
<pre><code>１つめの値を入力してください。
5
２つめの値を入力してください。
2
5 + 2 = 7
5 - 2 = 3
5 * 2 = 10
5 / 2 = 2 あまり 1
</code></pre>
<h3 id="問題２">問題２</h3>
<p>三角形の底辺と高さの値を入力することで、その三角形の面積を計算するプログラムを作りましょう。</p>
<p><em>実行結果</em></p>
<pre><code>三角形の底辺と高さの値を入力してください。
5
3
三角形の面積は、7.5です。
</code></pre>
</div>
</body>

</html>